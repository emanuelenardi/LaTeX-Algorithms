% NOTE The cmap package is intended to make the PDF files generated by pdflatex 'searchable and copyable' in acrobat reader and other compliant PDF viewers.
\usepackage{cmap}

\usepackage{ifxetex}
\ifxetex
	% https://tex.stackexchange.com/questions/49295
	\usepackage{etoolbox}
	\AtEndPreamble{
		\ifxetex
		\usepackage[no-math]{fontspec}
		\defaultfontfeatures{
			Ligatures=TeX,
			Numbers=OldStyle,
			Scale=MatchLowercase
		}
		\usepackage{polyglossia}
		\setmainlanguage{italian}
		\setotherlanguages{english}
		\setmainfont{Adobe Garamond Pro}
		\fi
	}
\else

	% NOTE 'fontenc' - is oriented to output, that is, what fonts to use for printing characters;
	% NOTE 'inputenc' - allows the user to input accented characters directly from the keyboard.
	\usepackage[T1]{fontenc}
	\usepackage[utf8]{inputenc}

	% NOTE enables the use of small capitals in different font shapes, e.g., slanted or bold slanted
	\usepackage{slantsc}
	% https://tex.stackexchange.com/a/27415/127473
	\usepackage{bold-extra}

	\usepackage[main=italian, english]{babel}

	% \usepackage[scaled=.9]{sourcecodepro}

	% IDEA 'microtype' - migliora il riempimento delle righe
	% NOTE activate = {true,nocompatibility} - activate protrusion and expansion
	% NOTE final - enable microtype; use 'draft' to disable
	% NOTE tracking = true, kerning=true, spacing=true - activate these techniques
	% NOTE factor = 1100 - add 10% to the protrusion amount (default is 1000)
	% NOTE stretch = 10, shrink = 10 - reduce stretchability/shrinkability (default is 20/20)
	\usepackage[
		% ,activate	= {true, nocompatibility}
		,activate	= {true}
		,final
		,tracking	= true
		,kerning	= true
		% ,spacing	= true
		,factor		= 1100
		,stretch	= 10
		,shrink		= 10
	]{microtype}
	% http://www.khirevich.com/latex/microtype/
	\SetTracking{encoding={*}, shape=sc}{40}
\fi
